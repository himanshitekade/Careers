{% load static %}

<style>
    .bullet-point {
        margin-right: 5px; /* Adjust the margin as needed */
    }
</style>
<div class="d-flex justify-content-end my-4 me-5">
    <a href="{% url 'jobcards' %}" class="btn btn-info"
    ><em class="icon ni ni-arrow-left"></em>Back</a>
</div>



<div class="nk-content nk-content-fluid">
    <div class="container-xl ">
        <div class="nk-content-body">
            <div class="content-page wide-lg">
                <div class="nk-block">
                    <div class="row">
                        <div class="col-8">
                            <div class="card p-4">
                                <article class="entry">
                                        <div class="card-inner">
                                            <div class="team">
                                                <div class="user-card user-card-s2">
                                                    <div class="user-info" style="border-bottom:1px dashed #ccc;">
                                                        <h6 style="font-size: 1.5rem; font-family: inherit;
                                                            font-weight: 600;
                                                            line-height: 1.5;
                                                            margin-bottom: 0.5rem;
                                                            color: #32325d; ">{{json_data.job_title}}</h6>
                                                        <span class="sub-text" style="font-size: 1rem; font-family: inherit;
                                                            font-weight: 500;
                                                            line-height: 1.5;
                                                            margin-bottom: 0.5rem;
                                                            color: #32325d; ">{{json_data.department}}</span>
                                                    </div>
                                                    <span class="sub-text"><em class="icon ni ni-map-pin-fill pe-1"></em>{{json_data.job_location}}</span>
                                                </div>
                                            </div><!-- .team -->
                                        </div><!-- .card-inner -->
                                        <h4 style="font-family: Open Sans, sans-serif;; font-size: 1.5rem; font-weight: 300; line-height: 1.7; margin-top: 0; margin-bottom: 1rem;" class="mt-3">Job Description:</h4>

                                        <div id="jobDescriptionContainer">
                                            <p style="font-size: 1rem; font-weight: 300; line-height: 1.7; margin-top: 0; margin-bottom: 1rem;">{{json_data.job_description}}</p>
                                        </div>
                                        
                                        <h4 style="font-family: Open Sans, sans-serif;; font-size: 1.5rem; font-weight: 300; line-height: 1.7; margin-top: 0; margin-bottom: 1rem;" class="my-3">Job Requirements:</h4>
                                        <div id="jobRequirementsContainer">
                                            <p style="font-size: 1rem; font-weight: 300; line-height: 1.7; margin-top: 0; margin-bottom: 1rem;">{{json_data.job_requirement}}</p>
                                        </div>    
                                </article>
                            </div>
                             <div class="d-flex justify-content-end pe-4 mt-3">
                              <button name="action" class="btn btn-info" value="apply" onclick="FormPage({{view_id}});viewpage({{i.id}})">Apply
                              </button>
                            </div>
                        </div> 
                        <div class="col-4 ">
                            <div class=" bg-white border border-white mb-3">
                                <div class="d-flex justify-content-center my-4">
                        <div class="card card-profile">
                            <div class="card-body pt-4">
                                <div class="row">
                                    <div class="col text-center">
                                        <h5 >Share with someone awesome</h5>
                                        <a href="https://facebook.com/sharer/sharer.php?u=https://career.fluidscapes.in/jobdetails?jobid=65&amp;quote=Fluidscapes Consultants (OPC) Pvt. Ltd. is hiring for Cinematographer  at https://career.fluidscapes.in/jobdetails?jobid=65" target="_blank" title="Share Job on Facebook"><button type="button" class="btn btn-facebook btn-icon-only rounded-circle"> <span class="btn-inner--icon"><i class="fab fa-facebook"></i></span>
                                        <a href="https://twitter.com/intent/tweet/?text=Fluidscapes Consultants (OPC) Pvt. Ltd. is hiring for Cinematographer  at https://career.fluidscapes.in/jobdetails?jobid=65" target="_blank" title="Share Job on Twitter"><button type="button" class="btn btn-twitter btn-icon-only rounded-circle"> <span class="btn-inner--icon"><i class="fab fa-twitter"></i></span> </button></a>
                                        <a href="http://www.linkedin.com/shareArticle?mini=true&amp;url=https://career.fluidscapes.in/jobdetails?jobid=65&amp;title=Fluidscapes Consultants (OPC) Pvt. Ltd. is hiring for Cinematographer &amp;summary=Fluidscapes Consultants (OPC) Pvt. Ltd. is hiring for Cinematographer at https://career.fluidscapes.in/jobdetails?jobid=65" target="_blank" title="Share Job on LinkedIn"><button type="button" class="btn btn-linkedin btn-icon-only rounded-circle"> <span class="btn-inner--icon"><i class="fab fa-linkedin"></i></span> </button></a>
                                    </div>
                        
                                </div>
                            </div>
                        </div>   
                    </div>
                </div>
                             <div class="bg-white text-center p-3" >
                                 <div >
                                    <h4 style="font-family: Open Sans, sans-serif;; font-size: 1.5rem; font-weight: 300; line-height: 1.7; margin-top: 0; margin-bottom: 1rem; border-bottom:1px dashed #ccc;">Other Openings:</h4>
                                {% for i in job_titles_data %}
                                <li class="my-3 fs-5">
                                    <a href="javascript:void(0)" onclick="viewpage({{i.id}})" style="color: #00A0E3;">{{i.job_title}}</a>
                                     <p>{{i.job_location}}</p>

                                </li>
                                {% endfor %}
                                 </div>
                             </div>
                             <div class="d-flex justify-content-center my-4">
                                <a href="{% url 'jobcards' %}" class="btn btn-info"
                                >View all Openings</a>
                            </div>
                        </div>   
                    </div>
                </div>
            </div>
        </div>
    </div>

   
</div>
</div>
</div>





<script>
  function FormPage(view_id){
    console.log("view_id", view_id)
    $.ajax({
      method:'GET',
      url: "{% url 'jobcards' %}",
      data:{
          action:"get_form",
          view_id:view_id
      },
      success:function(data){
        console.log("data",data)
        $('#refresh-section').html(data)

      }
      
    })
  }
</script>



<!-- FOR SEO -->
<!-- <script>
    const jobTitles = [
        {% for item in json_data %}
            "{{ item.job_title }}"{% if not forloop.last %}, {% endif %}
        {% endfor %}
    ];

    const key = document.querySelector("meta[name='keywords']");
    key.setAttribute("content", jobTitles.join(', '));
    console.log("Job Titles:", jobTitles);
    // console.log("Meta Tag Content:", key.getAttribute("content"));
</script> -->


<script>
    // Function to detect the bullet or numbering style used in the text
    function detectBulletStyle(text) {
        if (text.includes('•')) {
            return '•';
        } else if (text.includes('1.') || text.includes('1)')) {
            return '1.';
        }
        return null; // Default case
    }

    // Function to convert text with various bullet or numbering styles to an unordered list
    function createBulletList(containerId, text) {
        var bulletStyle = detectBulletStyle(text);

        if (bulletStyle) {
            var bulletPointsArray = text.split(bulletStyle).filter(function (point) {
                return point.trim() !== '';
            });

            var ul = document.createElement('ul');
            bulletPointsArray.forEach(function (point) {
                var li = document.createElement('li');
                li.innerHTML = '<span class="bullet-point">' + bulletStyle + '</span>' + point.trim();
                ul.appendChild(li);
            });

            var container = document.getElementById(containerId);
            container.innerHTML = ''; // Clear the original content
            container.appendChild(ul);
        } else {
            var container = document.getElementById(containerId);
            container.innerHTML = '<p>' + text + '</p>';
        }
    }

    // Create lists for job description and job requirements
    createBulletList('jobDescriptionContainer', '{{json_data.job_description}}');
    createBulletList('jobRequirementsContainer', '{{json_data.job_requirement}}');
</script>

<script src="https://code.jquery.com/jquery-3.6.0.js"></script>
<script src="https://code.jquery.com/ui/1.13.0/jquery-ui.js"></script>